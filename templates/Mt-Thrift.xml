<templateSet group="Mt-Thrift">
  <template name="deleg" value="if (Objects.isNull(thriftRequest)) {&#10;            return new $methodReturnType$;&#10;        }&#10;        String thriftMethod = $methodName$;&#10;&#10;        try {&#10;            thriftRequest = BaseDataConvert.convertTrainTripReq(fromStationCode, toStationCode, startDate, exactStation, trainCode);&#10;            TrainTripRes thriftResponse = trainTripService.queryTrainTripWithoutLeftTicketNum(thriftRequest);&#10;            if (thriftResponse == null) {&#10;                CatReportUtil.reportNullThriftDelegate(CatMetricEnum.AGENT_BASE_DATA, thriftMethod);&#10;                log.error(&quot;AgentBaseDataDelegateService {} return null, req: {}&quot;, thriftMethod, thriftRequest);&#10;                // todo 这个返回参可能要改&#10;                return new $methodReturnType$;;&#10;            }&#10;            if (0 != thriftResponse.getCode()) {&#10;                log.error(&quot;AgentBaseDataDelegateService {} return error, req: {}, errorCode: {}, errorMsg: {}&quot;, thriftMethod, thriftRequest, thriftResponse.getCode(), thriftResponse.getMsg());&#10;                CatReportUtil.reportThriftDelegate(CatMetricEnum.AGENT_BASE_DATA, thriftMethod, thriftResponse.getCode() + &quot;:&quot; + thriftResponse.getMsg());&#10;                // todo 这个返回参可能要改&#10;                return new $methodReturnType$;;&#10;            }&#10;&#10;            CatReportUtil.reportSuccessThriftDelegate(CatMetricEnum.AGENT_BASE_DATA, thriftMethod);&#10;            return thriftResponse.getTrainTrips();&#10;        } catch (TException e) {&#10;            CatReportUtil.reportTExceptionThriftDelegate(CatMetricEnum.AGENT_BASE_DATA, thriftMethod);&#10;            log.error(&quot;AgentBaseDataDelegateService {} TException, req: {}&quot;, thriftMethod, thriftRequest, e);&#10;        } catch (Exception e) {&#10;            CatReportUtil.reportFailThriftDelegate(CatMetricEnum.AGENT_BASE_DATA, thriftMethod);&#10;            log.error(&quot;AgentBaseDataDelegateService {} system error, req: {}&quot;, thriftMethod, thriftRequest, e);&#10;        }&#10;        return new $methodReturnType$;;" description="调用服务的delegate服务" toReformat="false" toShortenFQNames="true" useStaticImport="true">
    <variable name="methodReturnType" expression="methodReturnType()" defaultValue="" alwaysStopAt="true" />
    <variable name="methodName" expression="methodName()" defaultValue="" alwaysStopAt="true" />
    <context>
      <option name="JAVA_CODE" value="true" />
    </context>
  </template>
</templateSet>